<!DOCTYPE html>
<html lang="pt-BR">
<meta charset="UTF-8">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meus Links √öteis</title>
    <style>
        /* Tema Windows 11 */
        :root {
            --primary-color: #0078d4;
            --secondary-color: #106ebe;
            --accent-color: #0099ff;
            --background-color: #f3f3f3;
            --surface-color: #ffffff;
            --text-color: #323130;
            --text-secondary: #605e5c;
            --border-color: #e1dfdd;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 4px 16px rgba(0, 0, 0, 0.15);
            --border-radius: 8px;
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 120px; /* Espa√ßo para o rodap√© */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: 300;
        }

        /* Cards e Superf√≠cies */
        .card {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        /* Bot√µes de Links */
        .links-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px 24px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-decoration: none;
            color: #fff;
            font-size: 16px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: var(--shadow);
            min-height: 56px;
            text-align: center;
            word-wrap: break-word;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
            filter: brightness(1.1);
        }

        .button:active {
            transform: translateY(0);
        }

        /* Cores dos bot√µes - Tema Windows 11 */
        .button-blue { background: linear-gradient(135deg, #0078d4, #106ebe); }
        .button-green { background: linear-gradient(135deg, #107c10, #0e6b0e); }
        .button-orange { background: linear-gradient(135deg, #ff8c00, #e67700); }
        .button-purple { background: linear-gradient(135deg, #881798, #6b1480); }
        .button-yellow { background: linear-gradient(135deg, #ffaa00, #e69500); }
        .button-red { background: linear-gradient(135deg, #d83b01, #c22500); }
        .button-purple-dark { background: linear-gradient(135deg, #5c2e91, #4a2370); }
        .button-orange-light { background: linear-gradient(135deg, #ff8c00, #e67700); }
        .button-blue-royal { background: linear-gradient(135deg, #0078d4, #005a9e); }
        .button-pink { background: linear-gradient(135deg, #e3008c, #c2006b); }
        .button-yellow-dark { background: linear-gradient(135deg, #ca5010, #a3410d); }

        /* Formul√°rios */
        .form-container {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .form-title {
            color: var(--primary-color);
            margin-bottom: 16px;
            font-size: 1.25rem;
            font-weight: 500;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 12px;
            margin-bottom: 16px;
        }

        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        input[type="text"], select {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: var(--surface-color);
            color: var(--text-color);
        }

        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
        }

        input[type="file"] {
            padding: 8px;
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            background: var(--background-color);
            cursor: pointer;
            transition: var(--transition);
        }

        input[type="file"]:hover {
            border-color: var(--primary-color);
        }

        /* Bot√µes de A√ß√£o */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: var(--shadow);
            min-height: 48px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--surface-color);
            color: var(--text-color);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .btn-danger {
            background: #d83b01;
            color: white;
        }

        .btn-danger:hover {
            background: #c22500;
            transform: translateY(-1px);
        }

        .btn-success {
            background: #107c10;
            color: white;
        }

        .btn-success:hover {
            background: #0e6b0e;
            transform: translateY(-1px);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-size: 18px;
        }

        .loading:before {
            content: '‚ü≥';
            display: inline-block;
            animation: spin 1s linear infinite;
            margin-right: 8px;
            font-size: 20px;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Bot√µes Flutuantes */
        .floating-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .floating-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 24px;
            color: white;
            box-shadow: var(--shadow-hover);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .floating-btn.danger {
            background: #d83b01;
        }

        .floating-btn.download {
            background: var(--primary-color);
        }

        /* Rodap√© */
        .footer {
            background: var(--surface-color);
            border-top: 1px solid var(--border-color);
            padding: 24px;
            text-align: center;
            color: var(--text-secondary);
            margin-top: 40px;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            bottom: 0;
            width: 100%;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            h1 {
                font-size: 2rem;
                margin-bottom: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .links-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .button {
                padding: 16px;
                font-size: 15px;
            }

            .card {
                padding: 16px;
                margin-bottom: 16px;
            }

            .floating-buttons {
                bottom: 16px;
                right: 16px;
            }

            .floating-btn {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }

            body {
                padding-bottom: 80px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 12px;
            }

            h1 {
                font-size: 1.75rem;
            }

            .floating-buttons {
                bottom: 12px;
                right: 12px;
            }

            .floating-btn {
                width: 44px;
                height: 44px;
                font-size: 18px;
            }

            body {
                padding-bottom: 60px;
            }
        }

        /* Anima√ß√µes */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: var(--text-color);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîó Meus Links √öteis</h1>
        
        <div id="loading" class="loading">Carregando seus links...</div>
        
        <div class="links-container" id="links">
            <!-- Links salvos no Firebase ser√£o exibidos aqui -->
        </div>
        
        <!-- Formul√°rio para adicionar links -->
        <div class="form-container fade-in">
            <h2 class="form-title">‚ûï Adicionar Novo Link</h2>
            <form id="form">
                <div class="form-row">
                    <input type="text" id="link" placeholder="üîó Cole o link aqui" required>
                    <input type="text" id="linkName" placeholder="üìù Nome do Link" required>
                </div>
                <div class="form-row">
                    <select id="color">                
                        <option value="blue">üîµ Azul</option>
                        <option value="green">üü¢ Verde</option>
                        <option value="orange">üü† Laranja</option>
                        <option value="purple">üü£ Roxo</option>
                        <option value="yellow">üü° Amarelo</option>
                        <option value="red">üî¥ Vermelho</option>
                        <option value="purple-dark">üü£ Roxo Escuro</option>
                        <option value="orange-light">üü† Laranja Claro</option>
                        <option value="blue-royal">üîµ Azul Royal</option>
                        <option value="pink">üü° Rosa</option>
                        <option value="yellow-dark">üü° Amarelo Escuro</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Adicionar Link</button>
                </div>
            </form>
        </div>

        <!-- Formul√°rio para excluir links -->
        <div class="form-container fade-in">
            <h2 class="form-title">üóëÔ∏è Gerenciar Links</h2>
            <form id="delete-form">
                <div class="form-row">
                    <select id="delete-select">
                        <option value="-1">Selecione um link para excluir</option>
                    </select>
                    <button type="submit" class="btn btn-danger">Excluir Link</button>
                </div>
            </form>
        </div>

        <!-- Importar links -->
        <div class="form-container fade-in">
            <h2 class="form-title">üì• Importar Links</h2>
            <div class="form-row">
                <input type="file" id="file-input" accept=".txt,.json">
                <button id="importLinksButton" class="btn btn-success">Importar Links</button>
            </div>
        </div>
    </div>

    <!-- Bot√µes flutuantes -->
    <div class="floating-buttons">
        <button id="downloadLinksButton" class="floating-btn download tooltip">
            üì•
            <span class="tooltiptext">Baixar Links</span>
        </button>
        <button id="clear-cache-btn" class="floating-btn danger tooltip">
            üóëÔ∏è
            <span class="tooltiptext">Limpar Tudo</span>
        </button>
    </div>

    <!-- Rodap√© -->
    <footer class="footer">
        <p>&copy; 2024 - Helio Goes Junior - Todos os direitos reservados</p>
        <p style="font-size: 14px; margin-top: 8px; color: var(--text-secondary);">
            Powered by Firebase & Windows 11 Design
        </p>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set, get, remove, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCHimH-hvDo2uedCijx8LKXMY_Z8fkLJS0",
            authDomain: "appsworksh.firebaseapp.com",
            databaseURL: "https://appsworksh-default-rtdb.firebaseio.com",
            projectId: "appsworksh",
            storageBucket: "appsworksh.firebasestorage.app",
            messagingSenderId: "910353044495",
            appId: "1:910353044495:web:b82a2c3d0a69dcfd663f7a",
            measurementId: "G-40DBMDT52V"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);

        // Refer√™ncia para os links no Firebase
        const linksRef = ref(database, 'links');

        // Vari√°vel global para armazenar os links
        let linksData = [];

        // Fun√ß√£o para carregar os links salvos no Firebase
        function loadLinksFromFirebase() {
            const loadingDiv = document.getElementById('loading');
            loadingDiv.style.display = 'block';
            
            onValue(linksRef, (snapshot) => {
                try {
                    const data = snapshot.val();
                    linksData = [];
                    const linksDiv = document.getElementById('links');
                    linksDiv.innerHTML = '';
                    
                    if (data) {
                        // Converter object para array e ordenar por timestamp
                        const linksArray = Object.entries(data).map(([key, value]) => ({
                            id: key,
                            ...value
                        })).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                        
                        linksArray.forEach((linkData, index) => {
                            linksData.push(linkData);
                            const button = createLinkButton(linkData.url, linkData.color, linkData.name);
                            button.classList.add('fade-in');
                            button.style.animationDelay = `${index * 0.1}s`;
                            linksDiv.appendChild(button);
                        });
                    }
                    
                    updateDeleteSelectOptions();
                    loadingDiv.style.display = 'none';
                } catch (error) {
                    console.error("Erro ao carregar links:", error);
                    loadingDiv.innerHTML = 'Erro ao carregar links. Tente novamente.';
                }
            });
        }

        // Fun√ß√£o para adicionar um link ao Firebase
        async function addLinkToFirebase(url, color, name) {
            try {
                const newLinkRef = push(linksRef);
                await set(newLinkRef, {
                    url: url,
                    color: color,
                    name: name,
                    timestamp: Date.now()
                });
                
                // Feedback visual
                showNotification('‚úÖ Link adicionado com sucesso!', 'success');
            } catch (error) {
                console.error("Erro ao adicionar link:", error);
                showNotification('‚ùå Erro ao adicionar link. Tente novamente.', 'error');
            }
        }

        // Fun√ß√£o para deletar um link do Firebase
        async function deleteLinkFromFirebase(linkId) {
            try {
                const linkRef = ref(database, `links/${linkId}`);
                await remove(linkRef);
                
                showNotification('üóëÔ∏è Link exclu√≠do com sucesso!', 'success');
            } catch (error) {
                console.error("Erro ao excluir link:", error);
                showNotification('‚ùå Erro ao excluir link. Tente novamente.', 'error');
            }
        }

        // Fun√ß√£o para limpar todos os links do Firebase
        async function clearAllLinksFromFirebase() {
            try {
                await remove(linksRef);
                showNotification('üßπ Todos os links foram removidos!', 'success');
            } catch (error) {
                console.error("Erro ao limpar links:", error);
                showNotification('‚ùå Erro ao limpar links. Tente novamente.', 'error');
            }
        }

        // Fun√ß√£o para criar um bot√£o de link
        function createLinkButton(url, color, name) {
            const button = document.createElement('a');
            button.href = url;
            button.className = 'button button-' + color;
            button.target = '_blank';
            button.textContent = name;
            return button;
        }

        // Fun√ß√£o para baixar os links em um arquivo de texto
        function downloadLinks() {
            const jsonString = JSON.stringify(linksData.map(link => ({
                url: link.url,
                color: link.color,
                name: link.name
            })), null, 2);
            const blob = new Blob([jsonString], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `meus-links-${new Date().toISOString().split('T')[0]}.json`;
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('üì• Links baixados com sucesso!', 'success');
        }

        // Fun√ß√£o para mostrar notifica√ß√µes
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.innerHTML = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                max-width: 300px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            `;
            
            if (type === 'success') {
                notification.style.background = '#107c10';
            } else {
                notification.style.background = '#d83b01';
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Fun√ß√£o para importar links de um arquivo
        function importLinksFromFile(file) {
            const reader = new FileReader();

            reader.onload = async function (event) {
                try {
                    const fileContent = event.target.result;
                    let importedLinks;
                    
                    try {
                        importedLinks = JSON.parse(fileContent);
                    } catch {
                        // Se n√£o for JSON, tenta como texto simples
                        const lines = fileContent.split('\n').filter(line => line.trim());
                        importedLinks = lines.map(line => ({
                            url: line.trim(),
                            name: 'Link Importado',
                            color: 'blue'
                        }));
                    }
                    
                    if (Array.isArray(importedLinks)) {
                        let imported = 0;
                        for (const link of importedLinks) {
                            if (link.url && link.name && link.color) {
                                await addLinkToFirebase(link.url, link.color, link.name);
                                imported++;
                            }
                        }
                        showNotification(`üì• ${imported} links importados com sucesso!`, 'success');
                    } else {
                        showNotification('‚ùå Formato de arquivo inv√°lido.', 'error');
                    }
                } catch (error) {
                    console.error("Erro ao importar links:", error);
                    showNotification('‚ùå Erro ao importar links.', 'error');
                }
            };

            reader.readAsText(file);
        }

        // Fun√ß√£o para atualizar as op√ß√µes do menu de exclus√£o
        function updateDeleteSelectOptions() {
            const deleteSelect = document.getElementById('delete-select');
            deleteSelect.innerHTML = '<option value="-1">Selecione um link para excluir</option>';
            
            linksData.forEach(function (link, index) {
                const option = document.createElement('option');
                option.value = index;
                option.text = link.name;
                deleteSelect.appendChild(option);
            });
        }

        // Event Listeners
        window.onload = function () {
            loadLinksFromFirebase();
            
            // Adicionar estilos para anima√ß√µes
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        };

        document.getElementById('downloadLinksButton').addEventListener('click', downloadLinks);

        document.getElementById('form').addEventListener('submit', async function (event) {
            event.preventDefault();
            const link = document.getElementById('link').value;
            const color = document.getElementById('color').value;
            const name = document.getElementById('linkName').value;

            await addLinkToFirebase(link, color, name);
            
            // Limpar o formul√°rio
            document.getElementById('link').value = '';
            document.getElementById('linkName').value = '';
        });

        document.getElementById('delete-form').addEventListener('submit', async function (event) {
            event.preventDefault();
            const deleteIndex = document.getElementById('delete-select').value;
            
            if (deleteIndex !== "-1") {
                const linkToDelete = linksData[deleteIndex];
                await deleteLinkFromFirebase(linkToDelete.id);
            }
        });

        // Importar links
        document.getElementById('importLinksButton').addEventListener('click', function () {
            const fileInput = document.getElementById('file-input');
            const file = fileInput.files[0];

            if (file) {
                importLinksFromFile(file);
                fileInput.value = ''; // Limpar o input
            } else {
                showNotification('‚ùå Selecione um arquivo para importar.', 'error');
            }
        });

        // Limpar todos os links
        document.getElementById('clear-cache-btn').addEventListener('click', async function () {
            const senha = prompt("üîê Digite a senha para limpar todos os links:");
            if (senha === '123') {
                await clearAllLinksFromFirebase();
            } else if (senha !== null) {
                showNotification('‚ùå Senha incorreta.', 'error');
            }
        });
    </script>
</body>
</html>
